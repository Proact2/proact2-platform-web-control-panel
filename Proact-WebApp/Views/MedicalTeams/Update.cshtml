@model MedicalTeamEditRequest

@{
    ViewData["Title"] = "Medical Team Details";
}

<div class="row">
    <!-- Details -->
    <div class="col-8">
        <form asp-action="Update" id="MedicalTeamEditForm" class="form-horizontal">

            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        @*<i class="fas fa-text-width"></i>*@
                        @Model.Name
                    </h3>
                </div>
                <!-- /.card-header -->
                <div class="card-body">

                    <div class="form-group row">
                        <label asp-for="@Model.Name" class="col-sm-2 col-form-label"></label>
                        <div class="col-sm-10">
                            <input name="name" asp-for="@Model.Name" class="form-control">
                            <span asp-validation-for="@Model.Name" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label asp-for="@Model.AddressLine1" class="col-sm-2 col-form-label"></label>
                        <div class="col-sm-10">
                            <input name="addressLine1" asp-for="@Model.AddressLine1" class="form-control">
                            <span asp-validation-for="@Model.AddressLine1" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label asp-for="@Model.AddressLine2" class="col-sm-2 col-form-label"></label>
                        <div class="col-sm-10">
                            <input asp-for="@Model.AddressLine2" class="form-control">
                            <span asp-validation-for="@Model.AddressLine2" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label asp-for="@Model.City" class="col-sm-2 col-form-label"></label>
                        <div class="col-sm-10">
                            <input name="city" asp-for="@Model.City" class="form-control">
                            <span asp-validation-for="@Model.City" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label asp-for="@Model.StateOrProvince" class="col-sm-2 col-form-label"></label>
                        <div class="col-sm-10">
                            <input asp-for="@Model.StateOrProvince" class="form-control">
                            <span asp-validation-for="@Model.StateOrProvince" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label asp-for="@Model.RegionCode" class="col-sm-2 col-form-label"></label>
                        <div class="col-sm-10">
                            <input name="regionCode" asp-for="@Model.RegionCode" class="form-control">
                            <span asp-validation-for="@Model.RegionCode" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label asp-for="@Model.PostalCode" class="col-sm-2 col-form-label"></label>
                        <div class="col-sm-10">
                            <input name="postalCode" asp-for="@Model.PostalCode" class="form-control">
                            <span asp-validation-for="@Model.PostalCode" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label asp-for="@Model.Country" class="col-sm-2 col-form-label"></label>
                        <div class="col-sm-10">
                            <input name="country" asp-for="@Model.Country" class="form-control">
                            <span asp-validation-for="@Model.Country" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label asp-for="@Model.Phone" class="col-sm-2 col-form-label"></label>
                        <div class="col-sm-10">
                            <input asp-for="@Model.Phone" class="form-control">
                            <span asp-validation-for="@Model.Phone" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label asp-for="@Model.TimeZone" class="col-sm-2 col-form-label"></label>
                        <div class="col-sm-10">
                            <select class="form-control select2bs4"
                                    id="timezone"
                                    style="width: 100%;"
                                    asp-for="@Model.TimeZone">
                            </select>
                            <span asp-validation-for="@Model.TimeZone" class="text-danger"></span>
                        </div>
                    </div>

                    <input type="hidden" asp-for="@Model.ProjectId" />
                    <input type="hidden" asp-for="@Model.MedicalTeamId" />
                </div>

                <div class="card-footer">
                    <button type="submit" class="btn btn-success float-right">Edit</button>
                    <button asp-action="Index" asp-route-projectId="@ViewBag.projectId" class="btn btn-default">Back</button>
                </div>

            </div>
        </form>
    </div>

    <!-- Admins -->
    <div class="col-4">

        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Admins</h3>
            </div>
            <!-- /.card-header -->
            <div class="card-body p-0">

                <table id="AdminTable" class="table table-striped">
                    <thead>
                        <tr>
                            <th>
                                Name
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in (List<UserModel>)ViewBag.admins)
                        {
                            <tr>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Name)
                                </td>

                            </tr>
                        }
                    </tbody>

                </table>
            </div>
            <!-- /.card-body -->
        </div>

    </div>
</div>

@section Scripts {

    <!-- DataTables  & Plugins -->
    <script src="~/lib/datatables/jquery.dataTables.min.js"></script>
    <script src="~/lib/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
    <script src="~/lib/datatables-responsive/js/dataTables.responsive.min.js"></script>
    <script src="~/lib/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
    <script src="~/lib/datatables-buttons/js/dataTables.buttons.min.js"></script>
    <script src="~/lib/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
    <script src="~/lib/jszip/jszip.min.js"></script>
    <script src="~/lib/pdfmake/pdfmake.min.js"></script>
    <script src="~/lib/pdfmake/vfs_fonts.js"></script>
    <script src="~/lib/datatables-buttons/js/buttons.html5.min.js"></script>
    <script src="~/lib/datatables-buttons/js/buttons.print.min.js"></script>
    <script src="~/lib/datatables-buttons/js/buttons.colVis.min.js"></script>
    <!-- jquery-validation -->
    <script src="~/lib/jquery-validation/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation/additional-methods.min.js"></script>
    <!-- Timezones-->
    <script src="~/lib/timezones/timezones.full.js"></script>

    <script>$(function () {

            $('#timezone').timezones();

            $('#MedicalTeamCreateForm').validate({
                rules: {
                    name: {
                        required: true
                    },
                    addressLine1: {
                        required: true
                    },
                    city: {
                        required: true
                    },
                    regionCode: {
                        pattern: "^([A-Z]{2}-[A-Z0-9]{1,3})$"
                    },
                    postalCode: {
                        required: true
                    },
                    country: {
                        required: true
                    },
                    timeZone: {
                        required: true
                    },

                },
                messages: {
                    name: {
                        required: "Required"
                    },
                    addressLine1: {
                        required: "Required"
                    },
                    city: {
                        required: "Required"
                    },
                    regionCode: {
                        pattern: "Invalid Region Code"
                    },
                    postalCode: {
                        required: "Required"
                    },
                    country: {
                        required: "Required"
                    },
                    timeZone: {
                        required: "Required"
                    },
                },
                errorElement: 'span',
                errorPlacement: function (error, element) {
                    error.addClass('invalid-feedback');
                    element.closest('.form-group').append(error);
                },
                highlight: function (element, errorClass, validClass) {
                    $(element).addClass('is-invalid');
                },
                unhighlight: function (element, errorClass, validClass) {
                    $(element).removeClass('is-invalid');
                }
            });



        });</script>
}